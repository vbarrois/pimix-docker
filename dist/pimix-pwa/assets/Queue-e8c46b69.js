var q=Object.defineProperty;var x=(o,e,t)=>e in o?q(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var c=(o,e,t)=>(x(o,typeof e!="symbol"?e+"":e,t),t);import{O as w,S as j,_ as D,V as O,s as E,A as B,u as P,l as N,p as m,b as T,o as l,c as d,w as Q,d as i,t as _,F as v,e as f,n as p,y as z,B as y,C as A,D as I,E as U,G as k,H as F,T as G,q as L}from"./index-29bcaaf6.js";import{V as H,D as R}from"./DragIcon-6a428e20.js";import{S as J}from"./SongCard-877650a7.js";import"./OptionsIcon-bdc80d17.js";import"./NotLikedIcon-07bbc64f.js";var K=Object.defineProperty,M=Object.getOwnPropertyDescriptor,W=(o,e,t,n)=>{for(var s=n>1?void 0:n?M(e,t):e,u=o.length-1,a;u>=0;u--)(a=o[u])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&K(e,t,s),s};let $=class extends O{constructor(){super(...arguments);c(this,"songController",E(()=>B()));c(this,"appStore",P());c(this,"vote")}created(){var e,t;N.isNil((e=this.vote.song)==null?void 0:e.id)||this.songController.loadInfos((t=this.vote.song)==null?void 0:t.id)}get currentVote(){return this.vote}getThumb(e){return this.songController.getThumb(e).src}gotoSong(e){this.appStore.isSelectionActive||this.appStore.openSongIDCard(e)}};$=W([w({props:{vote:Object},components:{SongCategories:j}})],$);const X=$,Y={class:"w-12 h-12 md:w-20 md:h-20 rounded my-auto"},Z={class:"flex flex-col w-full pl-2 pr-2 truncate"},ee={class:"text-left md:text-xl font-bold"},oe={class:"mt-1 flex flex-1 gap-1"},te={class:"__badge__label2"};function se(o,e,t,n,s,u){const a=m("SongCategories"),h=T("lazy");return o.currentVote?(l(),d("div",{key:0,class:"flex p-2 __card",onClick:e[0]||(e[0]=g=>o.gotoSong(o.currentVote.song))},[Q(i("img",Y,null,512),[[h,o.getThumb(o.currentVote.song.id)]]),i("div",Z,[i("span",ee,_(o.songController.title),1),i("span",oe,[i("span",te,_(o.$tc("stats.votepoints",o.currentVote.points)),1),(l(!0),d(v,null,f(o.currentVote.votes,(g,S)=>(l(),d("span",{key:`song-${o.currentVote.song.id}-genre-${g.id}-${S}`,class:"__badge__label"},_(g.login),1))),128))]),p(a,{reduced:"true",class:"mt-1",song:o.songController.song},null,8,["song"])])])):z("",!0)}const ne=D(X,[["render",se]]);var re=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,le=(o,e,t,n)=>{for(var s=n>1?void 0:n?ae(e,t):e,u=o.length-1,a;u>=0;u--)(a=o[u])&&(s=(n?a(e,t,s):a(s))||s);return n&&s&&re(e,t,s),s};let b=class extends O{constructor(){super(...arguments);c(this,"appStore",P());c(this,"queueStore",A());c(this,"voteStore",I());c(this,"pending",U(this.queueStore.pending))}orderChanged(e){const t=e.moved.oldIndex-e.moved.newIndex,n=k(e.moved.element);F.emit("send",{command:"QUEUE",params:{action:"move",uuid:n.uuid,slideLength:t}})}vote(e){this.appStore.voteSong(e)}queue(e){this.appStore.queueSong(e)}after(e){this.appStore.afterSong(e)}songSelected(e){this.appStore.openSongIDCard(e)}};b=le([w({components:{SongCard:J,VoteCard:ne,draggable:H,DragIcon:R}})],b);const de=b,ie={class:"flex flex-col w-full h-full mt-0"},ue={class:"flex text-center py-1 gap-1 justify-center __container__navigation"},ce={class:"__badge__label2"},pe={class:"__badge__label2"},ge={class:"__badge__label2"},_e={class:"grid grid-cols-1 md:gap-2 __container__list"};function me(o,e,t,n,s,u){var V;const a=m("VoteCard"),h=m("DragIcon"),g=m("SongCard"),S=m("draggable");return l(),d("div",ie,[i("div",ue,[i("span",ce,_((V=o.queueStore.pending)==null?void 0:V.length)+" Queued",1),i("span",pe,_(o.voteStore.votes.length)+" Voted",1),i("span",ge,_(o.queueStore.executed.length)+" Played",1)]),i("div",_e,[(l(!0),d(v,null,f(o.voteStore.ordered,(r,C)=>(l(),d("div",{key:`vote-${C}`},[p(a,{vote:r,class:"vote"},null,8,["vote"])]))),128)),p(S,{modelValue:o.pending,"onUpdate:modelValue":e[0]||(e[0]=r=>o.pending=r),handle:".handle",class:"flex flex-col p-1 md:p-0 gap-1",onChange:o.orderChanged},{default:y(()=>[p(G,null,{default:y(()=>[(l(!0),d(v,null,f(o.queueStore.pending,r=>(l(),d("div",{key:r.uuid,class:"flex truncate cursor-pointer items-center rounded-l-xl rounded-r-xl __icon__action"},[p(h,{class:"__icon__drag ml-1"}),p(g,{queueitem:r,class:"w-full rounded-r-xl",onClick:C=>o.songSelected(r.song)},null,8,["queueitem","onClick"])]))),128))]),_:1})]),_:1},8,["modelValue","onChange"]),(l(!0),d(v,null,f(o.queueStore.executed.slice(0,40),r=>(l(),d("div",{key:r.uuid,class:"flex"},[p(g,{queueitem:r,class:L(["w-full __card",{active:o.queueStore.isCurrentlyPlaying(r)}]),onClick:C=>o.songSelected(r.song)},null,8,["queueitem","class","onClick"])]))),128))])])}const be=D(de,[["render",me]]);export{be as default};
