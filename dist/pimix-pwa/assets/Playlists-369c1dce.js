var g=Object.defineProperty;var O=(e,s,t)=>s in e?g(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var p=(e,s,t)=>(O(e,typeof s!="symbol"?s+"":s,t),t);import{O as v,X as D,_ as b,V as $,s as h,Q as P,f as N,p as C,o as d,c as y,d as r,n as w,t as c,M as j,x as m,F as B,e as M,y as V,u as A,H as f}from"./index-29bcaaf6.js";var L=Object.defineProperty,S=Object.getOwnPropertyDescriptor,k=(e,s,t,o)=>{for(var l=o>1?void 0:o?S(s,t):s,i=e.length-1,n;i>=0;i--)(n=e[i])&&(l=(o?n(s,t,l):n(l))||l);return o&&l&&L(s,t,l),l};let u=class extends ${constructor(){super(...arguments);p(this,"playlistController",h(()=>P()));p(this,"playlist");p(this,"editmode",!1);p(this,"removeChecked",!1);p(this,"iconClass","")}open(s){this.$router.push({name:"playlist",params:{playlistid:s}})}formatDate(s){return N(s)}};u=k([v({props:{playlist:Object},components:{MyListIcon:D}})],u);const I=u,K={class:"flex flex-col w-full"},q={class:"flex gap-2"},E={class:"flex mt-2 gap-2"},F={class:"__badge__label2"},T={class:"__badge__label ml-auto"};function H(e,s,t,o,l,i){var a;const n=C("MyListIcon");return d(),y("div",{class:"flex p-2 __card rounded-l-none",onClick:s[0]||(s[0]=ss=>e.open(e.playlist.id))},[r("div",K,[r("div",q,[w(n),r("div",{ref:"playlistname",class:"font-bold text-xl pt-0 m-0"},c(e.playlist.name),513)]),r("span",E,[r("span",F,c((a=e.playlist.Songs)==null?void 0:a.length)+" morceaux",1),r("span",T,"crÃ©e le "+c(e.formatDate(e.playlist.createdAt)),1)])])])}const Q=b(I,[["render",H]]);var X=Object.defineProperty,x=Object.getOwnPropertyDescriptor,z=(e,s,t,o)=>{for(var l=o>1?void 0:o?x(s,t):s,i=e.length-1,n;i>=0;i--)(n=e[i])&&(l=(o?n(s,t,l):n(l))||l);return o&&l&&X(s,t,l),l};let _=class extends ${constructor(){super(...arguments);p(this,"appStore",A());p(this,"playlistController",h(()=>P()));p(this,"bNewPlaylist",!1)}mounted(){f.on("playlist",s=>{switch(s.action){case"refresh":this.playlistController.requestAllPlaylists();break}})}created(){this.playlistController.requestAllPlaylists()}unmounted(){f.off("playlist")}edit(){this.bNewPlaylist=!0,this.$nextTick(()=>{this.$refs.playlistname.focus()})}leave(s){s.target.blur(),this.bNewPlaylist=!1}async validate(){const s=this.$refs.playlistname.innerText.trim();s.length>0&&(await this.playlistController.createPlaylist(s),f.emit("playlist",{action:"refresh"}))}cancel(s){s.target.blur(),this.bNewPlaylist=!1}};_=z([v({components:{PlaylistCard:Q}})],_);const G=_,J={class:"flex-col"},R={class:"__container__screen"},U={class:"mt-1"},W={class:"__button__action mb-2"},Y={key:0,class:"__badge__label2 mt-2 text-center justify-center"};function Z(e,s,t,o,l,i){const n=C("PlaylistCard");return d(),y("div",J,[r("div",R,[r("h1",null,c(e.$t("playlist.lists")),1),r("div",U,[r("div",W,[e.bNewPlaylist?(d(),y("span",{key:0,ref:"playlistname",class:"font-bold",contenteditable:"",spellcheck:"false",onClick:s[0]||(s[0]=j(()=>{},["stop"])),onKeydown:s[1]||(s[1]=m((...a)=>e.leave&&e.leave(...a),["esc"])),onKeypress:s[2]||(s[2]=m((...a)=>e.leave&&e.leave(...a),["enter"])),onBlur:s[3]||(s[3]=(...a)=>e.validate&&e.validate(...a))},null,544)):(d(),y("span",{key:1,class:"font-bold",onClick:s[4]||(s[4]=(...a)=>e.edit&&e.edit(...a))},c(e.$t("playlist.new")),1))]),(d(!0),y(B,null,M(e.playlistController.playlists,a=>(d(),y("div",{key:a.id,class:"truncate cursor-pointer mt-1 border-b-2 border-t-2 border-[color:var(--font--active)]"},[w(n,{playlist:a},null,8,["playlist"])]))),128)),e.playlistController.playlists.length==0?(d(),y("div",Y,c(e.$t("playlist.noplaylist")),1)):V("",!0)])])])}const ts=b(G,[["render",Z]]);export{ts as default};
