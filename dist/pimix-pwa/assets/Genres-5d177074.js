var V=Object.defineProperty;var B=(t,o,e)=>o in t?V(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var d=(t,o,e)=>(B(t,typeof o!="symbol"?o+"":o,e),e);import{O as x,p as F,a9 as I,a1 as j,V as P,s as S,a4 as w,f as E,_ as D,q as i,o as _,c as f,n as u,d as n,t as c,a3 as L,U as A,u as T,l as h,M as y,Q as G,F as k,e as U,v as N}from"./index-4710a073.js";import{O as M}from"./OptionsIcon-22e275ca.js";import{S as R}from"./SortFiltertBar-4a75d094.js";var q=Object.defineProperty,z=Object.getOwnPropertyDescriptor,K=(t,o,e,s)=>{for(var r=s>1?void 0:s?z(o,e):o,a=t.length-1,l;a>=0;a--)(l=t[a])&&(r=(s?l(o,e,r):l(r))||r);return s&&r&&q(o,e,r),r};let $=class extends P{constructor(){super(...arguments);d(this,"controller",S(()=>w()));d(this,"genre")}filter(){const e=this.genre;this.$router.push({name:"genre",params:{genreids:e.id}})}toggleGenre(){this.controller.saveGenreState(this.genre)}formatDate(e){return E(e,!0)}};$=K([x({props:{genre:Object},components:{Toggle:F,StatsGroup:I,GenreIcon:j}})],$);const Q={class:"flex flex-col pl-2 pr-2 flex-1 min-w-0"},H={class:"flex"},J={class:"text-left font-bold truncate"},W={class:"text-left flex truncate justify-between mt-1"},X={class:"flex __badge__label"};function Y(t,o,e,s,r,a){const l=i("GenreIcon"),m=i("Toggle"),v=i("StatsGroup");return _(),f("div",{class:"flex p-2 items-center",onClick:o[1]||(o[1]=p=>t.filter())},[u(l),n("div",Q,[n("div",H,[n("span",J,c(t.genre.name),1),(_(),L(m,{key:t.genre.state,modelValue:t.genre.state,"onUpdate:modelValue":o[0]||(o[0]=p=>t.genre.state=p),"true-value":"1","false-value":"0","on-label":"ON","off-label":"OFF",class:"float-right ml-auto custom-control",onClick:A(t.toggleGenre,["stop"])},null,8,["modelValue","onClick"]))]),n("span",W,[n("span",X,[n("span",null,c(t.genre.yearfrom)+" - "+c(t.genre.yearto),1)])]),u(v,{group:t.genre,reduced:"true"},null,8,["group"])])])}const Z=D($,[["render",Y]]);var ee=Object.defineProperty,te=Object.getOwnPropertyDescriptor,oe=(t,o,e,s)=>{for(var r=s>1?void 0:s?te(o,e):o,a=t.length-1,l;a>=0;a--)(l=t[a])&&(r=(s?l(o,e,r):l(r))||r);return s&&r&&ee(o,e,r),r};let b=class extends P{constructor(){super(...arguments);d(this,"controller",S(()=>w()));d(this,"appStore",T())}mounted(){}created(){this.controller.initFromCookie("genres"),this.loadContent()}unmounted(){this.controller.saveCookie("genres")}get sortedGenres(){let e=this.controller.genres;return this.controller.navigator.keywords.length>0&&(e=h.filter(e,s=>h.includes(s.name.toUpperCase(),this.controller.navigator.keywords.toUpperCase()))),h.orderBy(e,[this.controller.navigator.sortKey],[this.controller.navigator.sortOrder])}async loadContent(){this.appStore.startLoading(),await this.controller.getList(),this.appStore.endLoading()}only(e){const s=e;this.controller.setOnly(s)}except(e){this.controller.setAllExcept(e)}togglePopup(e){this.appStore.openPopupProperties([{label:`${this.$t("library.filtering.only")} ${e.name}`,icon:y(()=>G(()=>import("./OnlyIcon-738c0d9b.js"),["assets/OnlyIcon-738c0d9b.js","assets/index-4710a073.js","assets/index-b4fb4765.css"])),action:()=>{this.only(e)}},{label:`${this.$t("library.filtering.allexcept")} ${e.name}`,icon:y(()=>G(()=>import("./AllExcept-fdabf541.js"),["assets/AllExcept-fdabf541.js","assets/index-4710a073.js","assets/index-b4fb4765.css"])),action:()=>{this.except(e)}}])}};b=oe([x({components:{GenreCard:Z,SortFilterBar:R,OptionsIcon:M}})],b);const re={class:"flex flex-col w-full"},se={class:"flex text-center justify-center py-1 gap-1 __container__navigation"},ne={class:"__badge__label2"},le={class:"__badge__label2"},ae={class:"__badge__label2"},ie={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 p-1 gap-1 __container__list"},ce=["onClick"];function pe(t,o,e,s,r,a){var p,C,O;const l=i("SortFilterBar"),m=i("GenreCard"),v=i("OptionsIcon");return _(),f("div",re,[n("div",se,[n("span",ne,c((p=t.controller)==null?void 0:p.total)+" genres",1),n("span",le,c((C=t.controller)==null?void 0:C.active)+" actifs",1),n("span",ae,c((O=t.controller)==null?void 0:O.activesongs)+" morceaux",1)]),u(l,{navigator:t.controller.navigator},null,8,["navigator"]),n("div",ie,[(_(!0),f(k,null,U(t.sortedGenres,g=>(_(),f("div",{key:`${g.id}`,class:N(["flex",{disabled:g.state==0}])},[u(m,{class:"__card truncate w-full rounded-l-xl",genre:g},null,8,["genre"]),n("div",{class:"flex __icon__action rounded-r-xl items-center",onClick:de=>t.togglePopup(g)},[u(v)],8,ce)],2))),128))])])}const he=D(b,[["render",pe]]);export{he as default};
