var q=Object.defineProperty;var x=(e,o,t)=>o in e?q(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var c=(e,o,t)=>(x(e,typeof o!="symbol"?o+"":o,t),t);import{O as y,S as j,V as D,s as E,A as B,u as O,l as N,_ as P,q as v,b as T,o as l,c as d,w as z,d as i,t as _,F as m,e as f,n as p,z as Q,B as A,C as I,D as U,E as k,G as F,H as w,T as G,v as L}from"./index-4710a073.js";import{V as H,D as R}from"./DragIcon-14cb583e.js";import{S as J}from"./SongCard-d70ff672.js";import"./OptionsIcon-22e275ca.js";import"./NotLikedIcon-8e594e82.js";var K=Object.defineProperty,M=Object.getOwnPropertyDescriptor,W=(e,o,t,n)=>{for(var s=n>1?void 0:n?M(o,t):o,u=e.length-1,a;u>=0;u--)(a=e[u])&&(s=(n?a(o,t,s):a(s))||s);return n&&s&&K(o,t,s),s};let $=class extends D{constructor(){super(...arguments);c(this,"songController",E(()=>B()));c(this,"appStore",O());c(this,"vote")}created(){var t,n;N.isNil((t=this.vote.song)==null?void 0:t.id)||this.songController.loadInfos((n=this.vote.song)==null?void 0:n.id)}get currentVote(){return this.vote}getThumb(t){return this.songController.getThumb(t).src}gotoSong(t){this.appStore.isSelectionActive||this.appStore.openSongIDCard(t)}};$=W([y({props:{vote:Object},components:{SongCategories:j}})],$);const X={class:"w-12 h-12 md:w-20 md:h-20 rounded my-auto"},Y={class:"flex flex-col w-full pl-2 pr-2 truncate"},Z={class:"text-left md:text-xl font-bold"},ee={class:"mt-1 flex flex-1 gap-1"},oe={class:"__badge__label2"};function te(e,o,t,n,s,u){const a=v("SongCategories"),h=T("lazy");return e.currentVote?(l(),d("div",{key:0,class:"flex p-2 __card",onClick:o[0]||(o[0]=g=>e.gotoSong(e.currentVote.song))},[z(i("img",X,null,512),[[h,e.getThumb(e.currentVote.song.id)]]),i("div",Y,[i("span",Z,_(e.songController.title),1),i("span",ee,[i("span",oe,_(e.$tc("stats.votepoints",e.currentVote.points)),1),(l(!0),d(m,null,f(e.currentVote.votes,(g,S)=>(l(),d("span",{key:`song-${e.currentVote.song.id}-genre-${g.id}-${S}`,class:"__badge__label"},_(g.login),1))),128))]),p(a,{reduced:"true",class:"mt-1",song:e.songController.song},null,8,["song"])])])):Q("",!0)}const se=P($,[["render",te]]);var ne=Object.defineProperty,re=Object.getOwnPropertyDescriptor,ae=(e,o,t,n)=>{for(var s=n>1?void 0:n?re(o,t):o,u=e.length-1,a;u>=0;u--)(a=e[u])&&(s=(n?a(o,t,s):a(s))||s);return n&&s&&ne(o,t,s),s};let b=class extends D{constructor(){super(...arguments);c(this,"appStore",O());c(this,"queueStore",A());c(this,"voteStore",I());c(this,"pending",U(this.queueStore.pending))}orderChanged(o){const t=o.moved.oldIndex-o.moved.newIndex,n=k(o.moved.element);F.emit("send",{command:"QUEUE",params:{action:"move",uuid:n.uuid,slideLength:t}})}vote(o){this.appStore.voteSong(o)}queue(o){this.appStore.queueSong(o)}after(o){this.appStore.afterSong(o)}songSelected(o){this.appStore.openSongIDCard(o)}};b=ae([y({components:{SongCard:J,VoteCard:se,draggable:H,DragIcon:R}})],b);const le={class:"flex flex-col w-full h-full mt-0"},de={class:"flex text-center py-1 gap-1 justify-center __container__navigation"},ie={class:"__badge__label2"},ue={class:"__badge__label2"},ce={class:"__badge__label2"},pe={class:"grid grid-cols-1 md:gap-2 __container__list"};function ge(e,o,t,n,s,u){var V;const a=v("VoteCard"),h=v("DragIcon"),g=v("SongCard"),S=v("draggable");return l(),d("div",le,[i("div",de,[i("span",ie,_((V=e.queueStore.pending)==null?void 0:V.length)+" Queued",1),i("span",ue,_(e.voteStore.votes.length)+" Voted",1),i("span",ce,_(e.queueStore.executed.length)+" Played",1)]),i("div",pe,[(l(!0),d(m,null,f(e.voteStore.ordered,(r,C)=>(l(),d("div",{key:`vote-${C}`},[p(a,{vote:r,class:"vote"},null,8,["vote"])]))),128)),p(S,{modelValue:e.pending,"onUpdate:modelValue":o[0]||(o[0]=r=>e.pending=r),handle:".handle",class:"flex flex-col p-1 md:p-0 gap-1",onChange:e.orderChanged},{default:w(()=>[p(G,null,{default:w(()=>[(l(!0),d(m,null,f(e.queueStore.pending,r=>(l(),d("div",{key:r.uuid,class:"flex truncate cursor-pointer items-center rounded-l-xl rounded-r-xl __icon__action"},[p(h,{class:"__icon__drag ml-1"}),p(g,{queueitem:r,class:"w-full rounded-r-xl",onClick:C=>e.songSelected(r.song)},null,8,["queueitem","onClick"])]))),128))]),_:1})]),_:1},8,["modelValue","onChange"]),(l(!0),d(m,null,f(e.queueStore.executed.slice(0,40),r=>(l(),d("div",{key:r.uuid,class:"flex"},[p(g,{queueitem:r,class:L(["w-full __card",{active:e.queueStore.isCurrentlyPlaying(r)}]),onClick:C=>e.songSelected(r.song)},null,8,["queueitem","class","onClick"])]))),128))])])}const $e=P(b,[["render",ge]]);export{$e as default};
