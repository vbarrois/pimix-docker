var g=Object.defineProperty;var O=(e,s,l)=>s in e?g(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l;var p=(e,s,l)=>(O(e,typeof s!="symbol"?s+"":s,l),l);import{O as v,X as N,V as b,s as $,N as P,f as D,_ as h,q as C,o as d,c as y,d as r,n as w,t as c,u as j,G as f,U as B,y as m,F as V,e as A,z as L}from"./index-b74e3224.js";var M=Object.defineProperty,S=Object.getOwnPropertyDescriptor,k=(e,s,l,o)=>{for(var t=o>1?void 0:o?S(s,l):s,i=e.length-1,n;i>=0;i--)(n=e[i])&&(t=(o?n(s,l,t):n(t))||t);return o&&t&&M(s,l,t),t};let u=class extends b{constructor(){super(...arguments);p(this,"playlistController",$(()=>P()));p(this,"playlist");p(this,"editmode",!1);p(this,"removeChecked",!1);p(this,"iconClass","")}open(l){this.$router.push({name:"playlist",params:{playlistid:l}})}formatDate(l){return D(l)}};u=k([v({props:{playlist:Object},components:{MyListIcon:N}})],u);const q={class:"flex flex-col w-full"},I={class:"flex gap-2"},K={class:"flex mt-2 gap-2"},E={class:"__badge__label2"},F={class:"__badge__label ml-auto"};function T(e,s,l,o,t,i){var a;const n=C("MyListIcon");return d(),y("div",{class:"flex p-2 __card rounded-l-none",onClick:s[0]||(s[0]=Z=>e.open(e.playlist.id))},[r("div",q,[r("div",I,[w(n),r("div",{ref:"playlistname",class:"font-bold text-xl pt-0 m-0"},c(e.playlist.name),513)]),r("span",K,[r("span",E,c((a=e.playlist.Songs)==null?void 0:a.length)+" morceaux",1),r("span",F,"crÃ©e le "+c(e.formatDate(e.playlist.createdAt)),1)])])])}const z=h(u,[["render",T]]);var G=Object.defineProperty,U=Object.getOwnPropertyDescriptor,X=(e,s,l,o)=>{for(var t=o>1?void 0:o?U(s,l):s,i=e.length-1,n;i>=0;i--)(n=e[i])&&(t=(o?n(s,l,t):n(t))||t);return o&&t&&G(s,l,t),t};let _=class extends b{constructor(){super(...arguments);p(this,"appStore",j());p(this,"playlistController",$(()=>P()));p(this,"bNewPlaylist",!1)}mounted(){f.on("playlist",l=>{switch(l.action){case"refresh":this.playlistController.requestAllPlaylists();break}})}created(){this.playlistController.requestAllPlaylists()}unmounted(){f.off("playlist")}edit(){this.bNewPlaylist=!0,this.$nextTick(()=>{this.$refs.playlistname.focus()})}leave(l){l.target.blur(),this.bNewPlaylist=!1}async validate(){const l=this.$refs.playlistname.innerText.trim();l.length>0&&(await this.playlistController.createPlaylist(l),f.emit("playlist",{action:"refresh"}))}cancel(l){l.target.blur(),this.bNewPlaylist=!1}};_=X([v({components:{PlaylistCard:z}})],_);const H={class:"flex-col"},J={class:"__container__screen"},Q={class:"mt-1"},R={class:"__button__action mb-2"},W={key:0,class:"__badge__label2 mt-2 text-center justify-center"};function Y(e,s,l,o,t,i){const n=C("PlaylistCard");return d(),y("div",H,[r("div",J,[r("h1",null,c(e.$t("playlist.lists")),1),r("div",Q,[r("div",R,[e.bNewPlaylist?(d(),y("span",{key:0,ref:"playlistname",class:"font-bold",contenteditable:"",spellcheck:"false",onClick:s[0]||(s[0]=B(()=>{},["stop"])),onKeydown:s[1]||(s[1]=m((...a)=>e.leave&&e.leave(...a),["esc"])),onKeypress:s[2]||(s[2]=m((...a)=>e.leave&&e.leave(...a),["enter"])),onBlur:s[3]||(s[3]=(...a)=>e.validate&&e.validate(...a))},null,544)):(d(),y("span",{key:1,class:"font-bold",onClick:s[4]||(s[4]=(...a)=>e.edit&&e.edit(...a))},c(e.$t("playlist.new")),1))]),(d(!0),y(V,null,A(e.playlistController.playlists,a=>(d(),y("div",{key:a.id,class:"truncate cursor-pointer mt-1 border-b-2 border-t-2 border-[color:var(--font--active)]"},[w(n,{playlist:a},null,8,["playlist"])]))),128)),e.playlistController.playlists.length==0?(d(),y("div",W,c(e.$t("playlist.noplaylist")),1)):L("",!0)])])])}const te=h(_,[["render",Y]]);export{te as default};
