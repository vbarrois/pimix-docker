var V=Object.defineProperty;var B=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var _=(t,e,o)=>(B(t,typeof e!="symbol"?e+"":e,o),o);import{O as x,z as F,a9 as I,a1 as j,_ as P,V as S,s as w,a4 as D,f as E,p as i,o as d,c as f,n as u,d as s,t as c,a3 as L,M as A,F as T,e as k,u as N,l as h,N as y,q as U,U as G}from"./index-29bcaaf6.js";import{O as z}from"./OptionsIcon-bdc80d17.js";import{S as M}from"./SortFiltertBar-8a3f8e64.js";var R=Object.defineProperty,q=Object.getOwnPropertyDescriptor,K=(t,e,o,n)=>{for(var r=n>1?void 0:n?q(e,o):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(r=(n?l(e,o,r):l(r))||r);return n&&r&&R(e,o,r),r};let $=class extends S{constructor(){super(...arguments);_(this,"controller",w(()=>D()));_(this,"genre")}filter(){const e=this.genre;this.$router.push({name:"genre",params:{genreids:e.id}})}toggleGenre(){this.controller.saveGenreState(this.genre)}formatDate(e){return E(e,!0)}};$=K([x({props:{genre:Object},components:{Toggle:F,StatsGroup:I,GenreIcon:j}})],$);const H=$,J={class:"flex flex-col pl-2 pr-2 flex-1 min-w-0"},Q={class:"flex"},W={class:"text-left font-bold truncate"},X={class:"text-left flex truncate justify-between mt-1"},Y={class:"flex __badge__label"};function Z(t,e,o,n,r,a){const l=i("GenreIcon"),m=i("Toggle"),v=i("StatsGroup");return d(),f("div",{class:"flex p-2 items-center",onClick:e[1]||(e[1]=p=>t.filter())},[u(l),s("div",J,[s("div",Q,[s("span",W,c(t.genre.name),1),(d(),L(m,{key:t.genre.state,modelValue:t.genre.state,"onUpdate:modelValue":e[0]||(e[0]=p=>t.genre.state=p),"true-value":"1","false-value":"0","on-label":"ON","off-label":"OFF",class:"float-right ml-auto custom-control",onClick:A(t.toggleGenre,["stop"])},null,8,["modelValue","onClick"]))]),s("span",X,[s("span",Y,[s("span",null,c(t.genre.yearfrom)+" - "+c(t.genre.yearto),1)])]),u(v,{group:t.genre,reduced:"true"},null,8,["group"])])])}const ee=P(H,[["render",Z]]);var te=Object.defineProperty,oe=Object.getOwnPropertyDescriptor,re=(t,e,o,n)=>{for(var r=n>1?void 0:n?oe(e,o):e,a=t.length-1,l;a>=0;a--)(l=t[a])&&(r=(n?l(e,o,r):l(r))||r);return n&&r&&te(e,o,r),r};let b=class extends S{constructor(){super(...arguments);_(this,"controller",w(()=>D()));_(this,"appStore",N())}mounted(){}created(){this.controller.initFromCookie("genres"),this.loadContent()}unmounted(){this.controller.saveCookie("genres")}get sortedGenres(){let e=this.controller.genres;return this.controller.navigator.keywords.length>0&&(e=h.filter(e,o=>h.includes(o.name.toUpperCase(),this.controller.navigator.keywords.toUpperCase()))),h.orderBy(e,[this.controller.navigator.sortKey],[this.controller.navigator.sortOrder])}async loadContent(){this.appStore.startLoading(),await this.controller.getList(),this.appStore.endLoading()}only(e){const o=e;this.controller.setOnly(o)}except(e){this.controller.setAllExcept(e)}togglePopup(e){this.appStore.openPopupProperties([{label:`${this.$t("library.filtering.only")} ${e.name}`,icon:y(()=>G(()=>import("./OnlyIcon-86fbede4.js"),["assets/OnlyIcon-86fbede4.js","assets/index-29bcaaf6.js","assets/index-bf39b48d.css"])),action:()=>{this.only(e)}},{label:`${this.$t("library.filtering.allexcept")} ${e.name}`,icon:y(()=>G(()=>import("./AllExcept-52c30c7d.js"),["assets/AllExcept-52c30c7d.js","assets/index-29bcaaf6.js","assets/index-bf39b48d.css"])),action:()=>{this.except(e)}}])}};b=re([x({components:{GenreCard:ee,SortFilterBar:M,OptionsIcon:z}})],b);const se=b,ne={class:"flex flex-col w-full"},le={class:"flex text-center justify-center py-1 gap-1 __container__navigation"},ae={class:"__badge__label2"},ie={class:"__badge__label2"},ce={class:"__badge__label2"},pe={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 p-1 gap-1 __container__list"},_e=["onClick"];function de(t,e,o,n,r,a){var p,C,O;const l=i("SortFilterBar"),m=i("GenreCard"),v=i("OptionsIcon");return d(),f("div",ne,[s("div",le,[s("span",ae,c((p=t.controller)==null?void 0:p.total)+" genres",1),s("span",ie,c((C=t.controller)==null?void 0:C.active)+" actifs",1),s("span",ce,c((O=t.controller)==null?void 0:O.activesongs)+" morceaux",1)]),u(l,{navigator:t.controller.navigator},null,8,["navigator"]),s("div",pe,[(d(!0),f(T,null,k(t.sortedGenres,g=>(d(),f("div",{key:`${g.id}`,class:U(["flex",{disabled:g.state==0}])},[u(m,{class:"__card truncate w-full rounded-l-xl",genre:g},null,8,["genre"]),s("div",{class:"flex __icon__action rounded-r-xl items-center",onClick:ue=>t.togglePopup(g)},[u(v)],8,_e)],2))),128))])])}const he=P(se,[["render",de]]);export{he as default};
